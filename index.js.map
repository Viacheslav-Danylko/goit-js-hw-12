{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '46290699-f987c2a4595ee60b837e9e9f4';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      page: page,\n      per_page: 15,\n      orientation: 'horizontal',\n      safesearch: 'true'\n      }\n    });\n\n    return response.data;\n  } catch (error) {\n      console.log(error);\n      throw error;\n    }\n}","export function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.hits.map((image) => { // Используем hits вместо queries\n    return `<li class=\"gallery-query\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-img\"\n          src=\"${image.webformatURL}\"\n          data-source=\"${image.largeImageURL}\"\n          alt=\"${image.tags}\"\n          width=\"360\"  onclick=\"return false\">\n        <ul class=\"gallery-descr\">\n          <li class=\"gallery-item\">\n            <p class=\"gallery-item-descr\">Likes</p>\n            <p class=\"gallery-value\">${image.likes}</p>\n          </li>\n          <li class=\"gallery-item\">\n            <p class=\"gallery-item-descr\">Views</p>\n            <p class=\"gallery-value\">${image.views}</p>\n          </li>\n          <li class=\"gallery-item\">\n            <p class=\"gallery-item-descr\">Comments</p>\n            <p class=\"gallery-value\">${image.comments}</p>\n          </li>\n          <li class=\"gallery-item\">\n            <p class=\"gallery-item-descr\">Downloads</p>\n            <p class=\"gallery-value\">${image.downloads}</p>\n          </li>\n        </ul>\n      </a>\n    </li>`;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('visually-hidden');\n};\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('visually-hidden');\n};\n\nexport function showMore() {\n  const loadMore = document.querySelector('.load-more');\n  loadMore.classList.remove('visually-hidden');\n}\nexport function hideMore() {\n  const loadMore = document.querySelector('.load-more');\n  loadMore.classList.add('visually-hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages, showLoader, hideLoader } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nlet lightbox = null;\nlet page = 1;\nconst pagePer = 15;\nconst loadMore = document.querySelector('.load-more');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const inputValue = form.elements.query.value.trim().toLowerCase();\n  if (inputValue === '') {\n    iziToast.error({\n      title: '',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      maxWidth: '432px',\n      messageColor: '#fff',\n      iconColor: '#fff'\n    });\n\n    return;\n  };\n\n  gallery.innerHTML = '';\n  page = 1;\n\n  try {\n    showLoader();\n    const images = await fetchImages(inputValue, page, pagePer);\n    renderImages(images);\n    lightbox = new SimpleLightbox('.gallery a').refresh();\n    hideLoader();\n\n    if (images.hits.length >= pagePer) {\n      showMore();\n    } else {\n      hideMore();\n    }\n    if (images.totalHits === 0) {\n      hideLoader();\n      iziToast.warning({\n        title: '',\n        message: 'No images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        maxWidth: '432px',\n        messageColor: '#fff',\n        iconColor: '#fff'\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: '',\n      message: 'Something went wrong. Please try again!',\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      maxWidth: '432px',\n      messageColor: '#fff',\n      iconColor: '#fff'\n    });\n  };\n});\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery-query')\n    .getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nloadMore.addEventListener('click', async () => {\n  page += 1;\n  const inputValue = form.elements.query.value.trim().toLowerCase();\n  try {\n    showLoader();\n    const images = await fetchImages(inputValue, page, pagePer);\n    renderImages(images);\n    lightbox.refresh();\n    hideLoader();\n\n    if (images.hits.length < pagePer) {\n      hideMore();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#2196F3',\n        maxWidth: '432px',\n        messageColor: '#fff',\n        iconColor: '#fff'\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again!',\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      maxWidth: '432px',\n      messageColor: '#fff',\n      iconColor: '#fff'\n    });\n  }\n});"],"names":["BASE_URL","API_KEY","fetchImages","query","page","axios","error","renderImages","images","gallery","markup","image","showLoader","hideLoader","form","lightbox","pagePer","loadMore","event","inputValue","iziToast","SimpleLightbox"],"mappings":"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"}